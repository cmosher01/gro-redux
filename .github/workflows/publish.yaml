---
on:
  push:
    branches:
      - "master"

jobs:
  "publish":
    runs-on: "windows-latest"

    permissions:
      contents: "write"

    steps:
      - uses: "actions/checkout@v3"

      - uses: "microsoft/setup-msbuild@v1.1.3"

      - shell: "powershell"
        run: |
          Invoke-WebRequest -Method Get -Uri https://go.microsoft.com/fwlink/p/?LinkId=323507 -OutFile sdksetup.exe -UseBasicParsing
          Start-Process -Wait sdksetup.exe -ArgumentList "/q", "/norestart", "/features", "OptionId.WindowsDesktopSoftwareDevelopmentKit", "OptionId.NetFxSoftwareDevelopmentKit"

      - run: |
          msbuild gedtree.sln
